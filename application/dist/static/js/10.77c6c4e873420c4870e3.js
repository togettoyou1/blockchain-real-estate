webpackJsonp([10],{"7PYk":function(e,t){},CbJ8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("Dd8w"),a=n.n(s),l=n("NYxO"),i=n("+OSn"),c={name:"AllSelling",data:function(){return{loading:!0,sellingList:[]}},computed:a.a({},l.b(["accountId","roles","userName","balance"])),created:function(){var e=this;i.c().then(function(t){null!==t&&(e.sellingList=t),e.loading=!1}).catch(function(t){e.loading=!1})},methods:{createSellingByBuy:function(e){var t=this;this.$confirm("是否立即购买?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then(function(){t.loading=!0,i.b({buyer:t.accountId,objectOfSale:e.objectOfSale,seller:e.seller}).then(function(e){t.loading=!1,null!==e?t.$message({type:"success",message:"购买成功!"}):t.$message({type:"error",message:"购买失败!"}),setTimeout(function(){window.location.reload()},1e3)}).catch(function(e){t.loading=!1})}).catch(function(){t.loading=!1,t.$message({type:"info",message:"已取消购买"})})},updateSelling:function(e,t){var n=this,s="";s="done"===t?"确认收款":"取消操作",this.$confirm("是否要"+s+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then(function(){n.loading=!0,i.e({buyer:e.buyer,objectOfSale:e.objectOfSale,seller:e.seller,status:t}).then(function(e){n.loading=!1,null!==e?n.$message({type:"success",message:s+"操作成功!"}):n.$message({type:"error",message:s+"操作失败!"}),setTimeout(function(){window.location.reload()},1e3)}).catch(function(e){n.loading=!1})}).catch(function(){n.loading=!1,n.$message({type:"info",message:"已取消"+s})})}}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("el-alert",{attrs:{type:"success"}},[n("p",[e._v("账户ID: "+e._s(e.accountId))]),e._v(" "),n("p",[e._v("用户名: "+e._s(e.userName))]),e._v(" "),n("p",[e._v("余额: ￥"+e._s(e.balance)+" 元")])]),e._v(" "),0==e.sellingList.length?n("div",{staticStyle:{"text-align":"center"}},[n("el-alert",{attrs:{title:"查询不到数据",type:"warning"}})],1):e._e(),e._v(" "),n("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{gutter:20}},e._l(e.sellingList,function(t,s){return n("el-col",{key:s,attrs:{span:6,offset:1}},[n("el-card",{staticClass:"all-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v(e._s(t.sellingStatus))]),e._v(" "),"admin"===e.roles[0]||t.seller!==e.accountId&&t.buyer!==e.accountId||"完成"===t.sellingStatus||"已过期"===t.sellingStatus||"已取消"===t.sellingStatus?e._e():n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(n){return e.updateSelling(t,"cancelled")}}},[e._v("取消")]),e._v(" "),"admin"!==e.roles[0]&&t.seller===e.accountId&&"交付中"===t.sellingStatus?n("el-button",{staticStyle:{float:"right",padding:"3px 8px"},attrs:{type:"text"},on:{click:function(n){return e.updateSelling(t,"done")}}},[e._v("确认收款")]):e._e(),e._v(" "),"admin"!==e.roles[0]&&"销售中"===t.sellingStatus&&t.seller!==e.accountId?n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(n){return e.createSellingByBuy(t)}}},[e._v("购买")]):e._e()],1),e._v(" "),n("div",{staticClass:"item"},[n("el-tag",[e._v("药品ID: ")]),e._v(" "),n("span",[e._v(e._s(t.objectOfSale))])],1),e._v(" "),n("div",{staticClass:"item"},[n("el-tag",{attrs:{type:"success"}},[e._v("销售者ID: ")]),e._v(" "),n("span",[e._v(e._s(t.seller))])],1),e._v(" "),n("div",{staticClass:"item"},[n("el-tag",{attrs:{type:"danger"}},[e._v("价格: ")]),e._v(" "),n("span",[e._v("￥"+e._s(t.price)+" 元")])],1),e._v(" "),n("div",{staticClass:"item"},[n("el-tag",{attrs:{type:"warning"}},[e._v("有效期: ")]),e._v(" "),n("span",[e._v(e._s(t.salePeriod)+" 天")])],1),e._v(" "),n("div",{staticClass:"item"},[n("el-tag",{attrs:{type:"info"}},[e._v("创建时间: ")]),e._v(" "),n("span",[e._v(e._s(t.createTime))])],1),e._v(" "),n("div",{staticClass:"item"},[n("el-tag",[e._v("购买者ID: ")]),e._v(" "),""===t.buyer?n("span",[e._v("虚位以待")]):e._e(),e._v(" "),n("span",[e._v(e._s(t.buyer))])],1)])],1)}),1)],1)},staticRenderFns:[]};var r=n("VU/8")(c,o,!1,function(e){n("7PYk")},null,null);t.default=r.exports}});
//# sourceMappingURL=10.77c6c4e873420c4870e3.js.map